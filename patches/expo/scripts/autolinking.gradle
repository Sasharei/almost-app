// Resolve `expo` > `expo-modules-autolinking` dependency chain
def nodeCommand = System.env.EXPO_NODE_BINARY
  ?: System.env.NODE_BINARY
  ?: System.properties['expo.nodeBinary']
  ?: System.properties['nodeBinary']
  ?: "node"

def autolinkingPath = [nodeCommand, "--print", "require.resolve('expo-modules-autolinking/package.json', { paths: [require.resolve('expo/package.json')] })"]
apply from: new File(
  providers.exec {
    workingDir(rootDir)
    commandLine(autolinkingPath)
  }.standardOutput.asText.get().trim(), 
  "../scripts/android/autolinking_implementation.gradle"
)
